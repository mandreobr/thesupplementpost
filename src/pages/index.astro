---
import { getCollection } from 'astro:content';
import { CATEGORY_CONFIG } from '../config/categories';

const reviews = await getCollection('reviews');

// Descobrir quais categorias estão realmente em uso
const categoriesInUse = Object.entries(CATEGORY_CONFIG).filter(
  ([label]) => reviews.some((r) => r.data.category === label)
);
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Best Supplements Today — Trusted Supplement Reviews</title>
    <meta
      name="description"
      content="Evidence-based supplement reviews organized by category to help you find the right product for your health goals."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="canonical" href="https://bestsupplementstoday.com/" />
  </head>

  <body class="bg-slate-100 text-slate-900">
    <header class="w-full border-b border-slate-200 bg-white/80 backdrop-blur">
      <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-4">
        <a href="/" class="text-sm font-semibold tracking-[0.25em] text-slate-900 uppercase">
          Best Supplements Today
        </a>

        <nav class="hidden md:flex items-center gap-6 text-sm font-medium text-slate-600">
          <a href="/" class="hover:text-slate-900 transition">Home</a>
          <a href="/reviews" class="hover:text-slate-900 transition">All Reviews</a>
        </nav>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 pb-20">
      <!-- HERO -->
      <section class="pt-10 pb-8 text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">
          Explore supplement reviews by category
        </h1>
        <p class="max-w-2xl mx-auto text-base md:text-lg text-slate-600">
          Navigate by health goal — from weight loss and brain support to circulation,
          liver, dental, men’s and women’s health.
        </p>
      </section>

      <!-- MENU DE CATEGORIAS NA HOME -->
      <section class="mb-10">
        <div class="flex flex-wrap gap-2 justify-center">
          {categoriesInUse.map(([label, config]) => (
            <a
              href={`/categories/${config.slug}`}
              class="inline-flex items-center rounded-full border border-slate-300 bg-white px-4 py-1.5 text-xs md:text-sm font-medium text-slate-700 hover:border-blue-500 hover:text-blue-700 hover:shadow-sm transition"
            >
              {label}
            </a>
          ))}
        </div>
      </section>

      <!-- Você pode manter aqui uma seção de "Latest Reviews" se quiser -->
    </main>
  </body>
</html>
