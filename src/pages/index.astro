---
import { getCollection } from "astro:content";
import { CATEGORY_CONFIG } from "../config/categories";

const reviews = await getCollection("reviews");

// categorias para o dropdown
const navCategories = [
  { label: "Weight Loss", slug: "weight-loss" },
  { label: "Menâ€™s Health", slug: "men-health" },
  { label: "Womenâ€™s Health", slug: "women-health" },
  { label: "Heart & Circulation", slug: "heart-and-circulation" },
  { label: "Liver & Gut", slug: "liver-and-gut" },
  { label: "Brain & Neuro", slug: "brain-and-neuro" },
  { label: "Dental Health", slug: "dental-health" },
];

// Ãºltimos 5 reviews (ordenados pelo tÃ­tulo)
const latestReviews = reviews
  .slice()
  .sort((a, b) => {
    const ta = (a.data.pageTitle ?? a.data.title ?? "").toLowerCase();
    const tb = (b.data.pageTitle ?? b.data.title ?? "").toLowerCase();
    return ta.localeCompare(tb);
  })
  .slice(0, 5);

// imagens do carrossel
const heroCarouselImages = [
  { src: "/images/1.Home/woman-plank.jpg", alt: "Woman exercising on the beach" },
  { src: "/images/1.Home/supplements-yellow.jpg", alt: "Supplements on a yellow background" },
  { src: "/images/1.Home/back-muscles.jpg", alt: "Back muscles of a fit woman at the gym" },
  { src: "/images/1.Home/omega-softgels.jpg", alt: "Omega-3 softgels spilling from a jar" },
  { src: "/images/1.Home/barbell-gym.jpg", alt: "Athlete holding barbell at the gym" },
  { src: "/images/1.Home/old-man-gym.jpg", alt: "Older man training at the gym" },
  { src: "/images/1.Home/supplements-hand.jpg", alt: "Hands holding colorful supplement capsules" },
];

const scrollingImages = [...heroCarouselImages, ...heroCarouselImages];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>BestSupplementsToday â€” Evidence-Based Supplement Reviews</title>
    <meta
      name="description"
      content="With BestSupplementsToday you compare the best supplements for every health goal â€” with expert reviews organized by health category."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="canonical" href="https://bestsupplementstoday.com/" />

    <link rel="icon" href="/images/favicon-bst.png" type="image/png" sizes="32x32" />

    <!-- Fonte Inter -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --blue-main: #1d4ed8;
        --blue-soft: #e0f2fe;
        --bg-page: #e5e7eb;
        --text-main: #0f172a;
        --text-muted: #64748b;
        --border-subtle: #e5e7eb;
        --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.18);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: var(--bg-page);
        color: var(--text-main);
        font-size: 16px; /* ðŸ”¹ base maior no mobile */
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      .container {
        max-width: 1120px;
        margin: 0 auto;
        padding: 0 16px;
      }

      /* HEADER */

      .site-header {
        position: sticky;
        top: 0;
        z-index: 50;
        background: #ffffff;
        box-shadow: 0 1px 6px rgba(15, 23, 42, 0.08);
      }

      .header-inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 16px;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .header-logo {
        height: 64px; /* logo bem visÃ­vel */
        width: auto;
        display: block;
      }

      .nav-desktop {
        display: none;
        align-items: center;
        gap: 20px;
        font-size: 15px; /* ðŸ”¹ menu desktop um pouco maior */
      }

      .nav-link {
        font-weight: 500;
        color: #4b5563;
      }

      .nav-link:hover {
        color: var(--blue-main);
      }

      .dropdown {
        position: relative;
      }

      .dropdown-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        border-radius: 8px;
        border: 1px solid transparent;
        background: transparent;
        cursor: pointer;
        font-size: 15px;
        font-weight: 600;
        color: #374151;
      }

      .dropdown-btn:hover {
        background: #f3f4f6;
      }

      .dropdown-icon {
        width: 14px;
        height: 14px;
      }

      .dropdown-menu {
        position: absolute;
        right: 0;
        top: 110%;
        width: 230px;
        background: #ffffff;
        border-radius: 12px;
        padding: 8px;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.16);
        border: 1px solid rgba(15, 23, 42, 0.08);
        opacity: 0;
        transform: translateY(-4px);
        pointer-events: none;
        transition: opacity 0.18s ease, transform 0.18s ease;
      }

      .dropdown:hover .dropdown-menu {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      .dropdown-item {
        display: block;
        padding: 7px 10px;
        border-radius: 8px;
        font-size: 14px;
        color: #374151;
      }

      .dropdown-item:hover {
        background: #eff6ff;
        color: var(--blue-main);
      }

      .nav-mobile-toggle {
        display: inline-flex;
        padding: 6px;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        cursor: pointer;
      }

      .nav-mobile-toggle svg {
        width: 22px;
        height: 22px;
      }

      .nav-mobile {
        display: none;
        border-top: 1px solid #e5e7eb;
        background: #ffffff;
      }

      .nav-mobile-inner {
        padding: 10px 16px 12px;
        font-size: 15px; /* ðŸ”¹ menu mobile maior */
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .nav-mobile-link {
        padding: 6px 10px;
        border-radius: 999px;
        background: #f3f4f6;
        color: #374151;
        font-weight: 500;
      }

      .nav-mobile-link:hover {
        background: #e5e7eb;
      }

      @media (min-width: 768px) {
        .nav-desktop {
          display: flex;
        }
        .nav-mobile-toggle {
          display: none;
        }
        .nav-mobile {
          display: none !important;
        }
      }

      /* PAGE WRAPPER */

      .page-wrapper {
        max-width: 1200px;
        margin: 24px auto 40px;
        background: #ffffff;
        border-radius: 26px;
        box-shadow: var(--shadow-soft);
        padding: 28px 0 30px;
      }

      main {
        padding: 0;
      }

      /* HERO / ABOUT */

      .about-card {
        background: #ffffff;
        border-radius: 20px;
        padding: 24px 24px 22px;
        border: 1px solid #dbeafe;
        box-shadow: 0 10px 24px rgba(37, 99, 235, 0.08);
      }

      .pill-eyebrow {
        font-size: 12px; /* 11 -> 12 */
        text-transform: uppercase;
        letter-spacing: 0.18em;
        font-weight: 700;
        color: #0284c7;
        margin-bottom: 8px;
      }

      .hero-title {
        font-size: 30px; /* 28 -> 30 */
        font-weight: 800;
        margin: 0 0 6px;
        color: #0f172a;
      }

      @media (min-width: 768px) {
        .hero-title {
          font-size: 34px; /* 32 -> 34 */
        }
      }

      .hero-sub {
        font-size: 16px; /* 15 -> 16 */
        color: var(--text-muted);
        margin: 0 0 18px;
        max-width: 640px;
      }

      @media (min-width: 1024px) {
        .hero-sub {
          max-width: 960px; /* mais largura no desktop pra caber em 1 linha */
        }
      }

      .about-title {
        font-size: 24px; /* 22 -> 24 */
        font-weight: 700;
        margin: 8px 0 8px;
      }

      .about-text {
        font-size: 16px; /* 15 -> 16 */
        line-height: 1.7;
        color: var(--text-muted);
      }

      /* LATEST REVIEWS */

      .section-title {
        font-size: 26px; /* 24 -> 26 */
        font-weight: 800;
        margin: 32px 0 16px;
        border-bottom: 2px solid var(--blue-main);
        padding-bottom: 6px;
        color: #0f172a;
      }

      @media (min-width: 768px) {
        .section-title {
          font-size: 28px; /* 26 -> 28 */
        }
      }

      .reviews-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 18px;
      }

      @media (min-width: 768px) {
        .reviews-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (min-width: 1024px) {
        .reviews-grid {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }

      @media (min-width: 1280px) {
        .reviews-grid {
          grid-template-columns: repeat(5, minmax(0, 1fr));
        }
      }

      .review-card {
        background: #ffffff;
        border-radius: 16px;
        padding: 16px 16px 14px;
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.12);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: transform 0.18s ease, box-shadow 0.18s ease;
        cursor: pointer;
      }

      .review-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 16px 35px rgba(15, 23, 42, 0.18);
      }

      .review-image {
        width: 100%;
        height: 130px;
        object-fit: contain;
        border-radius: 10px;
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        margin-bottom: 10px;
      }

      .review-tag {
        display: inline-flex;
        align-items: center;
        padding: 4px 10px;
        border-radius: 999px;
        background: #eff6ff;
        color: #1d4ed8;
        border: 1px solid rgba(37, 99, 235, 0.35);
        font-size: 12px; /* 11 -> 12 */
        font-weight: 600;
        margin-bottom: 8px;
        max-width: 100%;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .review-title {
        font-size: 16px; /* 14 -> 16 */
        font-weight: 700;
        color: #111827;
        margin: 0 0 4px;
        line-height: 1.45;
      }

      .review-footer {
        border-top: 1px solid #e5e7eb;
        margin-top: 10px;
        padding-top: 8px;
        text-align: right;
      }

      .review-cta {
        font-size: 14px; /* 13 -> 14 */
        font-weight: 600;
        color: #1d4ed8;
      }

      .review-cta:hover {
        color: #1e40af;
      }

      /* CARROSSEL  */

      .carousel-full {
        margin-top: 32px;
        background: radial-gradient(circle at top left, #e0f2fe 0, #ffffff 60%);
        border-radius: 20px;
        padding: 18px 18px 22px;
        border: 1px solid #dbeafe;
        box-shadow: 0 16px 35px rgba(15, 23, 42, 0.16);
      }

      .carousel-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 10px;
      }

      .carousel-title {
        text-transform: uppercase;
        letter-spacing: 0.16em;
        font-size: 12px;
        color: #0f172a;
        font-weight: 700;
      }

      .carousel-viewport {
        overflow: hidden;
        width: 100%;
      }

      .carousel-track {
        display: flex;
        align-items: center;
        gap: 18px;
        animation: scroll-strip 18s linear infinite;
      }

      .carousel-item {
        flex: 0 0 33.333%;
        max-width: 33.333%;
        height: 220px;
        border-radius: 18px;
        overflow: hidden;
        box-shadow: 0 16px 30px rgba(15, 23, 42, 0.25);
      }

      @media (max-width: 900px) {
        .carousel-item {
          flex-basis: 50%;
          max-width: 50%;
        }
      }

      @media (max-width: 640px) {
        .carousel-item {
          flex-basis: 85%;
          max-width: 85%;
        }
      }

      .carousel-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      @keyframes scroll-strip {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(-50%);
        }
      }

      /* DISCLAIMER */

      .disclaimer {
        margin-top: 32px;
        background: #f3f4ff;
        border-radius: 16px;
        padding: 18px 18px 16px;
        border-left: 4px solid var(--blue-main);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.7);
      }

      .disclaimer-title {
        font-size: 20px; /* 18 -> 20 */
        font-weight: 700;
        color: var(--blue-main);
        margin: 0 0 8px;
      }

      .disclaimer-text {
        font-size: 14px; /* 13 -> 14 */
        line-height: 1.7;
        color: #4b5563;
      }

      /* FOOTER */

      .site-footer {
        background: #0f172a;
        color: #9ca3af;
        padding: 18px 16px 20px;
        margin-top: 16px;
      }

      .footer-text-main {
        font-size: 13px;
      }

      .footer-text-sub {
        font-size: 11px;
        margin-top: 4px;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>

  <body>
    <header class="site-header">
      <div class="container">
        <div class="header-inner">
          <div class="header-left">
            <a href="/" aria-label="Best Supplements Today">
              <img
                src="/images/1.Home/logo-bst.png"
                alt=""
                class="header-logo"
              />
            </a>
          </div>

          <nav class="nav-desktop">
            <a href="/" class="nav-link">Home</a>
            <a href="/reviews" class="nav-link">All Reviews</a>

            <div class="dropdown">
              <button class="dropdown-btn" type="button">
                <span>Categories</span>
                <svg
                  class="dropdown-icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6 9L12 15L18 9"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
              <div class="dropdown-menu">
                {navCategories.map((cat) => (
                  <a
                    href={`/reviews/category/${cat.slug}`}
                    class="dropdown-item"
                  >
                    {cat.label}
                  </a>
                ))}
              </div>
            </div>
          </nav>

          <button class="nav-mobile-toggle" id="mobile-menu-toggle" type="button">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4 6H20M4 12H20M4 18H20"
                stroke="#111827"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </button>
        </div>

        <div class="nav-mobile hidden" id="mobile-menu">
          <div class="nav-mobile-inner">
            <a href="/" class="nav-mobile-link">Home</a>
            <a href="/reviews" class="nav-mobile-link">All Reviews</a>
            {navCategories.map((cat) => (
              <a
                href={`/reviews/category/${cat.slug}`}
                class="nav-mobile-link"
              >
                {cat.label}
              </a>
            ))}
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="page-wrapper">
        <div class="container">
          <!-- HERO / ABOUT -->
          <section class="about-card">
            <div class="pill-eyebrow">Evidence-Based Supplement Hub</div>
            <h1 class="hero-title">Explore supplement reviews by category</h1>
            <p class="hero-sub">
              Navigate by health goal â€” from weight loss and brain support to circulation,
              liver, dental care, menâ€™s and womenâ€™s health.
            </p>

            <h2 class="about-title">About Us</h2>
            <p class="about-text">
              At BestSupplementsToday, we help you compare the top supplements for every
              health goal across all major wellness categories â€” from Weight Loss and Menâ€™s
              &amp; Womenâ€™s Health to Liver, Gut, and Brain Support. Our editorial team
              conducts in-depth research into ingredient quality, scientific evidence, and
              real user outcomes to deliver honest, trustworthy supplement reviews. Each
              product is independently evaluated for safety, effectiveness, and overall
              value, ensuring you discover only the highest-rated supplements that
              genuinely align with your personal health goals.
            </p>
          </section>

          <!-- LATEST REVIEWS -->
          <section>
            <h2 class="section-title">Latest Reviews</h2>

            <div class="reviews-grid">
              {latestReviews.map((review) => {
                const title = review.data.pageTitle ?? review.data.title ?? "";
                const heroImage = review.data.heroImage ?? null;

                // ðŸ”¹ Usa SEMPRE o campo category do frontmatter,
                // formatando em "Title Case"
                const rawCategory = review.data.category ?? "";
                let categoryLabel = "Supplement Review";

                if (rawCategory) {
                  categoryLabel = String(rawCategory)
                    .replace(/[â€“â€”]/g, "-")
                    .replace(/[-_]+/g, " ")
                    .replace(/\s+/g, " ")
                    .trim()
                    .replace(/\b\w/g, (c) => c.toUpperCase());
                }

                const imageUrl =
                  heroImage ??
                  "https://placehold.co/300x180/e2e8f0/334155?text=Supplement+Image";

                return (
                  <article class="review-card">
                    <a href={`/reviews/${review.slug}`}>
                      <img
                        src={imageUrl}
                        alt={title}
                        class="review-image"
                        loading="lazy"
                      />
                      <span class="review-tag">{categoryLabel}</span>
                      <h3 class="review-title">{title}</h3>
                    </a>
                    <div class="review-footer">
                      <a href={`/reviews/${review.slug}`} class="review-cta">
                        Read Full Review â†’
                      </a>
                    </div>
                  </article>
                );
              })}
            </div>
          </section>

          <!-- CARROSSEL -->
          <section class="carousel-full">
            <div class="carousel-header">
              <div class="carousel-title">HEALTH &amp; LIFESTYLE SNAPSHOTS</div>
            </div>
            <div class="carousel-viewport">
              <div class="carousel-track">
                {scrollingImages.map((img) => (
                  <div class="carousel-item">
                    <img src={img.src} alt={img.alt} loading="lazy" />
                  </div>
                ))}
              </div>
            </div>
          </section>

          <!-- DISCLAIMER â€“ ÃšLTIMA SEÃ‡ÃƒO -->
          <section class="disclaimer">
            <h2 class="disclaimer-title">Disclaimer &amp; Disclosures</h2>
            <p class="disclaimer-text">
              All content on BestSupplementsToday is for informational purposes only and is
              not a substitute for professional medical advice, diagnosis, or treatment.
              Each product is a dietary supplement, not a prescription drug; statements
              about its benefits have not been evaluated by the U.S. Food and Drug
              Administration (FDA) and the product is not intended to diagnose, treat,
              cure, or prevent any disease. Results may vary based on individual health
              status, consistency of use, and lifestyle. If you are pregnant or nursing,
              taking medication, or have a medical condition, consult a qualified
              healthcare professional before using any supplement. This article contains
              affiliate linksâ€”if you purchase through them, BestSupplementsToday may earn a
              small commission at no additional cost to you. References to third-party
              sites are provided for convenience; we do not control or guarantee their
              content.
            </p>
          </section>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-text-main">
          Â© {new Date().getFullYear()} BestSupplementsToday. All rights reserved.
        </div>
        <div class="footer-text-sub">Support for your health journey.</div>
      </div>
    </footer>

    <script>
      const toggleBtn = document.getElementById("mobile-menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");

      if (toggleBtn && mobileMenu) {
        toggleBtn.addEventListener("click", () => {
          mobileMenu.classList.toggle("hidden");
        });
      }
    </script>
  </body>
</html>
